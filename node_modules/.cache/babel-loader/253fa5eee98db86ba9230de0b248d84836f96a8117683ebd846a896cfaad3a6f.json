{"ast":null,"code":"// This stores ALL certificates so verification shows correct data\nconst STORAGE_KEY = 'certificate_database_v1';\nclass CertificateStorage {\n  constructor() {\n    this.certificates = this.loadFromStorage();\n  }\n  loadFromStorage() {\n    try {\n      const data = localStorage.getItem(STORAGE_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      console.error('Error loading certificates:', error);\n      return {};\n    }\n  }\n  saveToStorage() {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(this.certificates));\n  }\n\n  // Save a certificate (called during generation)\n  saveCertificate(certificateData) {\n    if (!certificateData.certificateId) {\n      certificateData.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n\n    // Add QR code data\n    certificateData.qrData = JSON.stringify({\n      certificateId: certificateData.certificateId,\n      name: certificateData.name,\n      event: certificateData.event,\n      date: certificateData.date,\n      verifyUrl: `${window.location.origin}/verify/${certificateData.certificateId}`\n    });\n    this.certificates[certificateData.certificateId] = {\n      ...certificateData,\n      generatedAt: new Date().toISOString()\n    };\n    this.saveToStorage();\n    return certificateData.certificateId;\n  }\n\n  // Save multiple certificates (for CSV upload)\n  saveMultiple(certificatesArray) {\n    certificatesArray.forEach(cert => {\n      if (!cert.certificateId) {\n        cert.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n      }\n      cert.qrData = JSON.stringify({\n        certificateId: cert.certificateId,\n        name: cert.name,\n        event: cert.event,\n        date: cert.date,\n        verifyUrl: `${window.location.origin}/verify/${cert.certificateId}`\n      });\n      this.certificates[cert.certificateId] = {\n        ...cert,\n        generatedAt: new Date().toISOString()\n      };\n    });\n    this.saveToStorage();\n    return certificatesArray.map(c => c.certificateId);\n  }\n\n  // Get certificate by ID (called during verification)\n  getCertificate(certificateId) {\n    return this.certificates[certificateId] || null;\n  }\n\n  // Verify certificate exists\n  verify(certificateId) {\n    const certificate = this.getCertificate(certificateId);\n    if (!certificate) {\n      return {\n        valid: false,\n        error: 'Certificate not found. Please check the Certificate ID.',\n        suggestions: ['Check for typos in the Certificate ID', 'Certificate might have expired or been revoked', 'Contact the issuing organization for assistance']\n      };\n    }\n    return {\n      valid: true,\n      data: certificate,\n      verifiedAt: new Date().toISOString(),\n      message: 'Certificate verified successfully'\n    };\n  }\n\n  // Get all certificates (for admin)\n  getAll() {\n    return Object.values(this.certificates);\n  }\n\n  // Count certificates\n  count() {\n    return Object.keys(this.certificates).length;\n  }\n}\n\n// Create single instance\nconst certificateStorage = new CertificateStorage();\n\n// Export functions\nexport const saveCertificate = data => certificateStorage.saveCertificate(data);\nexport const saveMultipleCertificates = data => certificateStorage.saveMultiple(data);\nexport const getCertificate = id => certificateStorage.getCertificate(id);\nexport const verifyCertificate = id => certificateStorage.verify(id);\nexport const getAllCertificates = () => certificateStorage.getAll();\nexport const getCertificateCount = () => certificateStorage.count();\nexport default certificateStorage;","map":{"version":3,"names":["STORAGE_KEY","CertificateStorage","constructor","certificates","loadFromStorage","data","localStorage","getItem","JSON","parse","error","console","saveToStorage","setItem","stringify","saveCertificate","certificateData","certificateId","Date","now","Math","random","toString","substr","qrData","name","event","date","verifyUrl","window","location","origin","generatedAt","toISOString","saveMultiple","certificatesArray","forEach","cert","map","c","getCertificate","verify","certificate","valid","suggestions","verifiedAt","message","getAll","Object","values","count","keys","length","certificateStorage","saveMultipleCertificates","id","verifyCertificate","getAllCertificates","getCertificateCount"],"sources":["C:/Users/abhir/certificate-frontend/src/services/pdfGenerator.js"],"sourcesContent":["// This stores ALL certificates so verification shows correct data\r\nconst STORAGE_KEY = 'certificate_database_v1';\r\n\r\nclass CertificateStorage {\r\n  constructor() {\r\n    this.certificates = this.loadFromStorage();\r\n  }\r\n\r\n  loadFromStorage() {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEY);\r\n      return data ? JSON.parse(data) : {};\r\n    } catch (error) {\r\n      console.error('Error loading certificates:', error);\r\n      return {};\r\n    }\r\n  }\r\n\r\n  saveToStorage() {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(this.certificates));\r\n  }\r\n\r\n  // Save a certificate (called during generation)\r\n  saveCertificate(certificateData) {\r\n    if (!certificateData.certificateId) {\r\n      certificateData.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    }\r\n    \r\n    // Add QR code data\r\n    certificateData.qrData = JSON.stringify({\r\n      certificateId: certificateData.certificateId,\r\n      name: certificateData.name,\r\n      event: certificateData.event,\r\n      date: certificateData.date,\r\n      verifyUrl: `${window.location.origin}/verify/${certificateData.certificateId}`\r\n    });\r\n    \r\n    this.certificates[certificateData.certificateId] = {\r\n      ...certificateData,\r\n      generatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    this.saveToStorage();\r\n    return certificateData.certificateId;\r\n  }\r\n\r\n  // Save multiple certificates (for CSV upload)\r\n  saveMultiple(certificatesArray) {\r\n    certificatesArray.forEach(cert => {\r\n      if (!cert.certificateId) {\r\n        cert.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n      }\r\n      cert.qrData = JSON.stringify({\r\n        certificateId: cert.certificateId,\r\n        name: cert.name,\r\n        event: cert.event,\r\n        date: cert.date,\r\n        verifyUrl: `${window.location.origin}/verify/${cert.certificateId}`\r\n      });\r\n      this.certificates[cert.certificateId] = {\r\n        ...cert,\r\n        generatedAt: new Date().toISOString()\r\n      };\r\n    });\r\n    \r\n    this.saveToStorage();\r\n    return certificatesArray.map(c => c.certificateId);\r\n  }\r\n\r\n  // Get certificate by ID (called during verification)\r\n  getCertificate(certificateId) {\r\n    return this.certificates[certificateId] || null;\r\n  }\r\n\r\n  // Verify certificate exists\r\n  verify(certificateId) {\r\n    const certificate = this.getCertificate(certificateId);\r\n    \r\n    if (!certificate) {\r\n      return {\r\n        valid: false,\r\n        error: 'Certificate not found. Please check the Certificate ID.',\r\n        suggestions: [\r\n          'Check for typos in the Certificate ID',\r\n          'Certificate might have expired or been revoked',\r\n          'Contact the issuing organization for assistance'\r\n        ]\r\n      };\r\n    }\r\n\r\n    return {\r\n      valid: true,\r\n      data: certificate,\r\n      verifiedAt: new Date().toISOString(),\r\n      message: 'Certificate verified successfully'\r\n    };\r\n  }\r\n\r\n  // Get all certificates (for admin)\r\n  getAll() {\r\n    return Object.values(this.certificates);\r\n  }\r\n\r\n  // Count certificates\r\n  count() {\r\n    return Object.keys(this.certificates).length;\r\n  }\r\n}\r\n\r\n// Create single instance\r\nconst certificateStorage = new CertificateStorage();\r\n\r\n// Export functions\r\nexport const saveCertificate = (data) => certificateStorage.saveCertificate(data);\r\nexport const saveMultipleCertificates = (data) => certificateStorage.saveMultiple(data);\r\nexport const getCertificate = (id) => certificateStorage.getCertificate(id);\r\nexport const verifyCertificate = (id) => certificateStorage.verify(id);\r\nexport const getAllCertificates = () => certificateStorage.getAll();\r\nexport const getCertificateCount = () => certificateStorage.count();\r\n\r\nexport default certificateStorage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}