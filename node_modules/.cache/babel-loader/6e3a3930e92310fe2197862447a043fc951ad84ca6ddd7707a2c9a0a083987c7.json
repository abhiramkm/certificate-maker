{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhir\\\\certificate-frontend\\\\src\\\\pages\\\\UploadCSV.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport Papa from \"papaparse\";\nimport { generateCertificate } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UploadCSV = () => {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [results, setResults] = useState([]);\n  const handleCSV = e => {\n    Papa.parse(e.target.files[0], {\n      header: true,\n      skipEmptyLines: true,\n      complete: async res => {\n        setLoading(true);\n        const output = [];\n        for (const row of res.data) {\n          var _row$name, _row$course, _row$type, _row$event;\n          const payload = {\n            name: (_row$name = row.name) === null || _row$name === void 0 ? void 0 : _row$name.toUpperCase(),\n            course: (_row$course = row.course) === null || _row$course === void 0 ? void 0 : _row$course.toUpperCase(),\n            date: row.date,\n            type: (_row$type = row.type) === null || _row$type === void 0 ? void 0 : _row$type.toUpperCase(),\n            event: (_row$event = row.event) === null || _row$event === void 0 ? void 0 : _row$event.toUpperCase()\n          };\n          try {\n            const response = await generateCertificate(payload);\n            output.push({\n              name: payload.name,\n              link: response.data.downloadUrl\n            });\n          } catch {\n            output.push({\n              name: payload.name,\n              link: \"ERROR\"\n            });\n          }\n        }\n        setResults(output);\n        setLoading(false);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"30px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Bulk Certificate Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".csv\",\n      onChange: handleCSV\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Generating certificates...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: results.map((r, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [r.name, \" \\u2192\", \" \", r.link === \"ERROR\" ? \"Failed\" : /*#__PURE__*/_jsxDEV(\"a\", {\n          href: r.link,\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 46\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(UploadCSV, \"NnqNCQa23i01YaM4w8XixND8Kfs=\");\n_c = UploadCSV;\nexport default UploadCSV;\nvar _c;\n$RefreshReg$(_c, \"UploadCSV\");","map":{"version":3,"names":["React","useState","Papa","generateCertificate","jsxDEV","_jsxDEV","UploadCSV","_s","loading","setLoading","results","setResults","handleCSV","e","parse","target","files","header","skipEmptyLines","complete","res","output","row","data","_row$name","_row$course","_row$type","_row$event","payload","name","toUpperCase","course","date","type","event","response","push","link","downloadUrl","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","accept","onChange","map","r","i","href","_c","$RefreshReg$"],"sources":["C:/Users/abhir/certificate-frontend/src/pages/UploadCSV.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport { generateCertificate } from \"../services/api\";\r\n\r\nconst UploadCSV = () => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [results, setResults] = useState([]);\r\n\r\n  const handleCSV = (e) => {\r\n    Papa.parse(e.target.files[0], {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: async (res) => {\r\n        setLoading(true);\r\n        const output = [];\r\n\r\n        for (const row of res.data) {\r\n          const payload = {\r\n            name: row.name?.toUpperCase(),\r\n            course: row.course?.toUpperCase(),\r\n            date: row.date,\r\n            type: row.type?.toUpperCase(),\r\n            event: row.event?.toUpperCase(),\r\n          };\r\n\r\n          try {\r\n            const response = await generateCertificate(payload);\r\n            output.push({\r\n              name: payload.name,\r\n              link: response.data.downloadUrl,\r\n            });\r\n          } catch {\r\n            output.push({\r\n              name: payload.name,\r\n              link: \"ERROR\",\r\n            });\r\n          }\r\n        }\r\n\r\n        setResults(output);\r\n        setLoading(false);\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: \"30px\" }}>\r\n      <h2>Bulk Certificate Upload</h2>\r\n\r\n      <input type=\"file\" accept=\".csv\" onChange={handleCSV} />\r\n\r\n      {loading && <p>Generating certificates...</p>}\r\n\r\n      <ul>\r\n        {results.map((r, i) => (\r\n          <li key={i}>\r\n            {r.name} â†’{\" \"}\r\n            {r.link === \"ERROR\" ? \"Failed\" : <a href={r.link}>Download</a>}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadCSV;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}