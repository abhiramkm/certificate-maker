{"ast":null,"code":"// This stores ALL certificates so verification shows correct data\nconst STORAGE_KEY = 'certificate_database_v1';\nclass CertificateStorage {\n  constructor() {\n    this.certificates = this.loadFromStorage();\n  }\n  loadFromStorage() {\n    try {\n      const data = localStorage.getItem(STORAGE_KEY);\n      return data ? JSON.parse(data) : {};\n    } catch (error) {\n      return {};\n    }\n  }\n  saveToStorage() {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(this.certificates));\n  }\n\n  // Save a certificate (called during generation)\n  saveCertificate(certificateData) {\n    if (!certificateData.certificateId) {\n      certificateData.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    }\n    this.certificates[certificateData.certificateId] = {\n      ...certificateData,\n      generatedAt: new Date().toISOString()\n    };\n    this.saveToStorage();\n    return certificateData.certificateId;\n  }\n\n  // Save multiple certificates (for CSV upload)\n  saveMultiple(certificatesArray) {\n    certificatesArray.forEach(cert => {\n      if (!cert.certificateId) {\n        cert.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n      }\n      this.certificates[cert.certificateId] = {\n        ...cert,\n        generatedAt: new Date().toISOString()\n      };\n    });\n    this.saveToStorage();\n    return certificatesArray.map(c => c.certificateId);\n  }\n\n  // Get certificate by ID (called during verification)\n  getCertificate(certificateId) {\n    return this.certificates[certificateId] || null;\n  }\n\n  // Verify certificate exists\n  verify(certificateId) {\n    const certificate = this.getCertificate(certificateId);\n    if (!certificate) {\n      return {\n        valid: false,\n        error: 'Certificate not found. Please check the Certificate ID.',\n        suggestions: ['Check for typos in the Certificate ID', 'Certificate might have expired or been revoked', 'Contact the issuing organization for assistance']\n      };\n    }\n    return {\n      valid: true,\n      data: certificate,\n      verifiedAt: new Date().toISOString(),\n      message: 'Certificate verified successfully'\n    };\n  }\n\n  // Get all certificates (for admin)\n  getAll() {\n    return Object.values(this.certificates);\n  }\n\n  // Count certificates\n  count() {\n    return Object.keys(this.certificates).length;\n  }\n}\n\n// Create single instance\nconst certificateStorage = new CertificateStorage();\n\n// Export functions\nexport const saveCertificate = data => certificateStorage.saveCertificate(data);\nexport const saveMultipleCertificates = data => certificateStorage.saveMultiple(data);\nexport const getCertificate = id => certificateStorage.getCertificate(id);\nexport const verifyCertificate = id => certificateStorage.verify(id);\nexport const getAllCertificates = () => certificateStorage.getAll();\nexport const getCertificateCount = () => certificateStorage.count();\nexport default certificateStorage;","map":{"version":3,"names":["STORAGE_KEY","CertificateStorage","constructor","certificates","loadFromStorage","data","localStorage","getItem","JSON","parse","error","saveToStorage","setItem","stringify","saveCertificate","certificateData","certificateId","Date","now","Math","random","toString","substr","generatedAt","toISOString","saveMultiple","certificatesArray","forEach","cert","map","c","getCertificate","verify","certificate","valid","suggestions","verifiedAt","message","getAll","Object","values","count","keys","length","certificateStorage","saveMultipleCertificates","id","verifyCertificate","getAllCertificates","getCertificateCount"],"sources":["C:/Users/abhir/certificate-frontend/src/services/certificateStorage.js"],"sourcesContent":["// This stores ALL certificates so verification shows correct data\r\nconst STORAGE_KEY = 'certificate_database_v1';\r\n\r\nclass CertificateStorage {\r\n  constructor() {\r\n    this.certificates = this.loadFromStorage();\r\n  }\r\n\r\n  loadFromStorage() {\r\n    try {\r\n      const data = localStorage.getItem(STORAGE_KEY);\r\n      return data ? JSON.parse(data) : {};\r\n    } catch (error) {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  saveToStorage() {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(this.certificates));\r\n  }\r\n\r\n  // Save a certificate (called during generation)\r\n  saveCertificate(certificateData) {\r\n    if (!certificateData.certificateId) {\r\n      certificateData.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    }\r\n    \r\n    this.certificates[certificateData.certificateId] = {\r\n      ...certificateData,\r\n      generatedAt: new Date().toISOString()\r\n    };\r\n    \r\n    this.saveToStorage();\r\n    return certificateData.certificateId;\r\n  }\r\n\r\n  // Save multiple certificates (for CSV upload)\r\n  saveMultiple(certificatesArray) {\r\n    certificatesArray.forEach(cert => {\r\n      if (!cert.certificateId) {\r\n        cert.certificateId = `CERT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n      }\r\n      this.certificates[cert.certificateId] = {\r\n        ...cert,\r\n        generatedAt: new Date().toISOString()\r\n      };\r\n    });\r\n    \r\n    this.saveToStorage();\r\n    return certificatesArray.map(c => c.certificateId);\r\n  }\r\n\r\n  // Get certificate by ID (called during verification)\r\n  getCertificate(certificateId) {\r\n    return this.certificates[certificateId] || null;\r\n  }\r\n\r\n  // Verify certificate exists\r\n  verify(certificateId) {\r\n    const certificate = this.getCertificate(certificateId);\r\n    \r\n    if (!certificate) {\r\n      return {\r\n        valid: false,\r\n        error: 'Certificate not found. Please check the Certificate ID.',\r\n        suggestions: [\r\n          'Check for typos in the Certificate ID',\r\n          'Certificate might have expired or been revoked',\r\n          'Contact the issuing organization for assistance'\r\n        ]\r\n      };\r\n    }\r\n\r\n    return {\r\n      valid: true,\r\n      data: certificate,\r\n      verifiedAt: new Date().toISOString(),\r\n      message: 'Certificate verified successfully'\r\n    };\r\n  }\r\n\r\n  // Get all certificates (for admin)\r\n  getAll() {\r\n    return Object.values(this.certificates);\r\n  }\r\n\r\n  // Count certificates\r\n  count() {\r\n    return Object.keys(this.certificates).length;\r\n  }\r\n}\r\n\r\n// Create single instance\r\nconst certificateStorage = new CertificateStorage();\r\n\r\n// Export functions\r\nexport const saveCertificate = (data) => certificateStorage.saveCertificate(data);\r\nexport const saveMultipleCertificates = (data) => certificateStorage.saveMultiple(data);\r\nexport const getCertificate = (id) => certificateStorage.getCertificate(id);\r\nexport const verifyCertificate = (id) => certificateStorage.verify(id);\r\nexport const getAllCertificates = () => certificateStorage.getAll();\r\nexport const getCertificateCount = () => certificateStorage.count();\r\n\r\nexport default certificateStorage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}